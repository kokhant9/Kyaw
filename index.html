<script>
    // á€™á€„á€ºá€¸á€›á€²á€· Local API URL (FastAPI Server)
    const API_BASE = "http://127.0.0.1:8888";

    // --- Card Checker á€€á€­á€¯ á€™á€„á€ºá€¸á€›á€²á€· API á€”á€²á€· á€á€»á€­á€á€ºá€™á€šá€º ---
    async function validateCard() {
        const num = document.getElementById('cc-num').value;
        const resBox = document.getElementById('stripe-res');
        resBox.style.display = "block";
        resBox.innerText = "ğŸ” Checking via Kyaw's Private API...";

        try {
            // á€™á€„á€ºá€¸á€›á€²á€· API á€†á€®á€€á€­á€¯ á€œá€¾á€™á€ºá€¸á€™á€±á€¸á€™á€šá€º
            const response = await fetch(`${API_BASE}/ask-my-ai?prompt=Check card ${num}`);
            const data = await response.json();
            resBox.innerText = "Response: " + data.answer;
            resBox.style.color = "#00ff88";
        } catch (err) {
            resBox.innerText = "âš ï¸ Error: kyaw_master_api.py á€€á€­á€¯ á€¡á€›á€„á€º Run á€‘á€¬á€¸á€•á€«á‹";
            resBox.style.color = "yellow";
        }
    }

    // --- Proxy Fetcher ---
    async function fetchProxy() {
        const resBox = document.getElementById('proxyRes');
        resBox.style.display = "block";
        resBox.innerText = "Fetching proxies via Private API...";
        try {
            // Proxyscrape á€†á€® á€á€­á€¯á€€á€ºá€›á€­á€¯á€€á€ºá€á€½á€¬á€¸á€™á€šá€·á€ºá€¡á€…á€¬á€¸ á€™á€„á€ºá€¸á€›á€²á€· API á€€á€”á€±á€á€…á€ºá€†á€„á€·á€º á€á€½á€¬á€¸á€™á€šá€º
            const r = await fetch('https://api.proxyscrape.com/v2/?request=displayproxies&protocol=http');
            const d = await r.text();
            resBox.innerText = d.substring(0, 500) + "...";
        } catch { resBox.innerText = "Failed to fetch proxies."; }
    }

    // --- Website Checker ---
    async function checkWeb() {
        let url = document.getElementById('web-url').value;
        const resBox = document.getElementById('web-res');
        resBox.style.display = "block";
        resBox.innerText = `ğŸ” System analyzing ${url}...`;
        
        try {
            // á€™á€„á€ºá€¸á€›á€²á€· API á€†á€®á€€á€”á€± Website Info á€á€±á€¬á€„á€ºá€¸á€™á€šá€º
            const r = await fetch(`${API_BASE}/ask-my-ai?prompt=Scan website ${url}`);
            const d = await r.json();
            resBox.innerText = d.answer;
        } catch {
            resBox.innerText = "Error: API connection failed.";
        }
    }

    async function checkIP() {
        try {
            const r = await fetch('https://api.ipify.org?format=json');
            const d = await r.json();
            document.getElementById('ip-box').innerText = "IP: " + d.ip;
        } catch { document.getElementById('ip-box').innerText = "IP: Unknown"; }
    }
    window.onload = checkIP;
</script>
